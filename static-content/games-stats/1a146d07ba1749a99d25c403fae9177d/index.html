$(function(){$(document).on("click","input[type='button'].bet-stats, a.stats-option, input[type='button'].stats-live, input[type='button'].stats-group-selector",function(b){var a=$(b.target);b.stopPropagation();b.preventDefault();StatsClient.getStats(a)})});var StatsClient=(function(){var e="betting-stats/";var a=function(g){try{if(g.is(".stats-group-selector")){var f=g.closest("div.stats-group").next("div.stats-table");if(f.hasClass("stats-hide")){f.siblings("div.stats-table").addClass("stats-hide");f.removeClass("stats-hide")}else{f.addClass("stats-hide")}}var s=parseInt(g.data("stype"),10);if(!(s>=0&&s<=3)){return}var n=($("#statsDisplayMode").val()==="1");var m=g.hasClass("stats-prelive")||g.hasClass("stats-live");var i=(n?$("#statsPopupWrap"):$("#statsDomWrap"));var r="";if(s===d.FullTable){r=c.FullTable}else{if(s===d.FormTable){r=c.FormTable}else{if(s===d.HeadToHead){r=c.HeadToHead}}}var l=false;if(i.length>0){var h=i.find("ul.stats-"+r);l=(h.length>0);if(l){if(m){if(!n){if(g.hasClass("stats-viewed")){i.hide();g.removeClass("stats-viewed")}else{i.show();g.addClass("stats-viewed")}}}else{g.closest(".stats-menu").find(".ui-btn-active").removeClass("ui-btn-active");g.addClass("ui-btn-active");h.show().siblings("ul.stats-listview").hide()}return}}var k,o,q;if(!l){k=parseInt(g.data("group"),10);if(!(k===0||k===1)){return}o=parseInt(g.data("level"),10);if(!(o===0||o===1)){return}var q=g.data("stats");if(TwValidation.isNullOrWhitespace(q)){return}var p=q.split("-");if(!TwValidation.isNumericArrayValid(p)){return}if(g.data("processing")===1){return}g.data("processing",1)}return $.ajax({type:"POST",url:e+r,data:{bsp:q,st:s,sg:k,sl:o},beforeSend:function(t){$.mobile.loading("show")}}).then(function(u,x,y){if((y.status===204)||((y.status===200)&&(isUndefinedOrNull(u)))){return($.Deferred().reject())}if(n){if(s===d.FullTable){$('<div id="popupStats">').mdialog({useCustomClose:true,customCloseClass:"stats-close",maxWidth:-1,content:u})}else{$("div.ui-popup").children("ul").hide().last().after(u)}}else{var t=$("#statsDomWrap");var w=$('<div data-role="page"></div>');$(u).appendTo(w);w.appendTo("body").page().trigger("create");var v=w.children();if(t.find("ul.stats-listview").length>0){if(s===d.FullTable){t.html(v)}else{t.children("ul").hide().last().after(v)}}else{t.append(v)}w.remove()}$("div.ui-popup-active").attr("id","statsPopupWrap").addClass("stats-popup");if(m){if(!n){g.addClass("stats-viewed")}}else{g.closest("div").siblings().find("a.ui-btn-active").removeClass("ui-btn-active");g.addClass("ui-btn-active")}return(u)},function(u,t){twRouter.navigate("error",{trigger:true});return($.Deferred().reject())}).always(function(){$.mobile.loading("hide");g.data("processing",0)})}catch(j){$.mobile.loading("hide");g.data("processing",0)}};var d={FullTable:0,FormTable:1,HeadToHead:2};var c={FullTable:"full",FormTable:"form",HeadToHead:"head2head"};var b={Dom:0,Popup:1};return{getStats:a}}());